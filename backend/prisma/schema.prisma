generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Hod {
  id       Int    @id @default(autoincrement())
  name     String @unique
  password String
}

model Teacher {
  id                      Int      @id @default(autoincrement())
  name                    String
  password                String
  created_at              DateTime @default(now())
  email                   String   @unique
  bio                     String
  department              Dept
  institution             String
  office                  String
  phone                   String   @unique
  position                Position
  professional_experience String
  qualifications          String
  specialization          String
}

model Student {
  id          Int          @id @default(autoincrement())
  name        String
  email       String       @unique
  createdAt   DateTime     @default(now())
  department  Dept
  registerno  String       @unique
  year        Year
  Achivements String       @default("Provide It")
  Address     String       @default("Provide It")
  bio         String       @default("Provide It")
  phone       String       @default("Provide It")
  skills      String       @default("Provide It")
  teams       TeamMember[]
}

model Team {
  id               Int          @id @default(autoincrement())
  name             String
  competitionId    Int
  createdAt        DateTime     @default(now())
  certifacte       String?
  experience_level Experience   @default(BEGINNER)
  motive           String
  status           Tstatus      @default(REGISTERED)
  del_status       Delstatus    @default(ONLINE)
  competition      Competition  @relation(fields: [competitionId], references: [id])
  members          TeamMember[]
}

model TeamMember {
  id        Int     @id @default(autoincrement())
  studentId Int
  teamId    Int
  role      Role
  student   Student @relation(fields: [studentId], references: [id])
  team      Team    @relation(fields: [teamId], references: [id])

  @@unique([studentId, teamId])
}

model Competition {
  id         Int      @id @default(autoincrement())
  name       String
  url        String
  about      String
  deadline   DateTime
  createdAt  DateTime @default(now())
  category   String
  enddate    DateTime
  location   String
  priority   Priority
  prize_pool Int
  startdate  DateTime
  status     Status
  team_size  Int
  teams      Team[]
}

enum Role {
  LEADER
  DEVELOPER
}

enum Dept {
  IT
  CSE
  AIDS
  AIML
  ECE
  EEE
  MECH
}

enum Year {
  first_Year
  second_Year
  third_Year
  fourth_Year
}

enum Position {
  PROFESSOR
  ASSOCIATE_PROFESSOR
  ASSISTANT_PROFESSOR
  HOD
}

enum Status {
  REGISTRATION_OPEN
  UPCOMING
  ONGOING
  COMPLETED
}

enum Priority {
  LOW
  MEDIUM
  HIGH
}

enum Tstatus {
  REGISTERED
  SHORTLISTED
  REJECTED
  WON
}

enum Experience {
  BEGINNER
  INTERMEDIATE
  ADVANCED
}

enum Delstatus {
  ONLINE
  OFFLINE
}
